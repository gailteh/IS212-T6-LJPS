<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Journey editing Page</title>


    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" 
    crossorigin="anonymous">

    <!-- custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Javascript -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div class="container-fluid" style="margin-bottom: 20px;">
        <div class="banner text-center">
            <h1>Editing Learning Journey</h1>
        </div>

        <!-- nav bar -->
        <div class="row">
            <div class="col-11">
                <ul class="nav">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link active text-dark">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="roles.html" class="nav-link active text-dark">Roles</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="">Learning Journey</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- end of nav bar -->
        <div id="app">
            <!-- delete successfull message -->
            <!--  -->
            <div class="container-fluid  text-center" v-if="deleted === true">
                <p  class="text-danger">{{ delete_msg }}</p>
            </div>
            <div class="container-fluid  text-center" v-if="added === true">
                <p class="text-success">{{ added_msg }}</p>
            </div>
    
            <!-- learning-journey -->
            <div class="container-fluid" id="coursemanagement">
                <p>Learning Journey: {{ lj_id }}</p>
                <div class="row">
                    <div class="col">
                        <p>On-going Courses: </p>
                    </div>
                    <div class="col">
                        <button id="addCoursebutton" v-on:click="add_learningjourneycourse()" class="float-end">+ Course</button>
                    </div>
                </div>
    
                <!-- start of course card -->
                <div id="courses_card" v-for="course in courses" class="container-fluid">
                    <div class="col-md-3">
                        <div class="card">
                            <h5 class="card-header d-flex justify-content-between align-items-center">
                                Course 1<br/>
                                {{course_code}}: {{course_name}}
                                <button id="deleteCoursebutton" v-on:click="delete_learningjourneycourse(lj_id, course_code)">-</button>
                            </h5>
                            <img class="card-img-top" src="" alt="">
                            <div class="card-body">
                                <h5 class="card-title">What is this course about?</h5>
                                <p class="card-text">
                                    {{course_desc}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bundled Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" 
    crossorigin="anonymous"></script>

    <script>
        const view_lj_course_URL = "http://localhost:5000/learning_journey"
        const add_lj_course_URL = "http://localhost:<port>/<xxx>"
        const delete_lj_course_URL = "http://localhost:4999/learning_journey/"

        const app1 = Vue.createApp({
            data(){
                return {
                    // will take in 
                    lj_id: 1, 
                    course_code: "",
                    course_name: "",
                    course_desc: "",
                    errMsg: "",
                    delete_msg: "Course deleted successfully.",
                    added_msg: "Course added successfully",
                    deleted: false,
                    added: false,
                };
            },
            // created(){
            //     // on Vue instance created, load course list
            //     this.get_learningjourneycourses(lj_id);
            // },
            
            methods:{
                // not sure how you going to name it but i'll put this first
                get_learningjourneycourses(lj_id){
                    const response = 
                        fetch(`${view_lj_course_URL}`)
                        .then()
                            // .then(data => {
                            //     if (data.code === xxx)
                            // })
                },
                add_learningjourneycourse(){

                },
                delete_learningjourneycourse(lj_id, course_code){
                    fetch(`${delete_lj_course_URL}/${this.lj_id}/${this.course_code}`, {method: 'DELETE'})
                    .then(response => {
                        console.log(response.json())
                    })
                        // response => response.json())
                        // .then(data => {
                        //     if (data.code === 404) {
                        //         console.log(data.message)
                        //         this.errMsg = data.message

                        //     } else {
                        //         this.megaData = data;
                        //         for (i==0; i<data.length; i++) {
                        //             var lj_id = data[i].name;
                        //             var course_code = data[i].course_code;
                        //         }
                        //     }
                        // })
                }
            }
        }).mount('#app')


    </script>
</body>
</html>